{% extends 'main/layout.html' %}

{% block content %}

    <h1 id="title">Path Hero</h1>

    <p style="text-align: center;">Directions from {{ origin }} to {{ destination }}</p>

    <div id="back">
        <a href="../" class="save btn btn-default">Back to Home</a>
    </div>


    <div id="map"></div>


{% endblock %}

{% block maps_scripts %}
<script>
    function initMap() {
        var directionsService = new google.maps.DirectionsService;
        var directionsDisplay = new google.maps.DirectionsRenderer;
        var hopkins = new google.maps.LatLng(39.329103, -76.618540);
        var map = new google.maps.Map(document.getElementById('map'), {
            zoom: 17,
            center: hopkins
        });
        directionsDisplay.setMap(map);

        calculateAndDisplayRoute(directionsService, directionsDisplay);
    }

    function calculateAndDisplayRoute(directionsService, directionsDisplay) {
        directionsService.route({
            origin: new google.maps.LatLng({{ origin.lat }}, {{ origin.lng }}),
            destination: new google.maps.LatLng({{ destination.lat }}, {{ destination.lng }}),
            travelMode: 'DRIVING'
        }, function (response, status) {
            if (status === 'OK') {
                directionsDisplay.setDirections(response);
            } else {
                window.alert('Directions request failed due to ' + status);
            }
        });
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?key={{ MAPS_KEY }}&callback=initMap"
        async defer></script>

{% endblock %}
