{% extends 'main/layout.html' %}

{% block content %}

    <h1 id="title">Path Hero</h1>

    <form method="POST" class="post-form">
        {% csrf_token %}
        {{ form.as_ul }}
        <br>
        {% for mid_form in mid_formset %}
            <label>Mid:</label><li class="mid-input">{{ mid_form.mid }}</li>
            <br>
        {% endfor %}
        <br>
        {{ mid_formset.management_form }}
        <button type="submit" class="save btn btn-default">Find My Path</button>
    </form>

    <script>
        $('.mid-input').formset();
        /* TODO: overwrite add and remove styling */
    </script>

    <div id="map"></div>

{% endblock %}

{% block maps_scripts %}
    <script>
        var map;

        function initMap() {
            map = new google.maps.Map(document.getElementById('map'), {
                center: {lat: 39.329103, lng: -76.618540},
                zoom: 17
            });
        }

        /* Responsive Maps */
        google.maps.event.addDomListener(window, 'load', initMap);
        google.maps.event.addDomListener(window, 'resize', function () {
            var c = map.getCenter();
            google.maps.event.trigger(this.map, 'resize');
            map.setCenter(c);
        });
    </script>
    <script src="https://maps.googleapis.com/maps/api/js?key={{ MAPS_KEY }}&callback=initMap"
            async defer></script>
{% endblock %}
